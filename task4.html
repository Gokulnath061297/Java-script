<!-- SECTION 1 – Real-Time Function Logic
1. Payroll System:
Create calculateSalary(basicSalary, bonusPercentage)
- Calculate bonus
- Deduct 5% tax
- Return final salary
- Print full salary breakdown -->

<!-- Answer: -->

<script>
function calculateSalary(basicSalary, bonusPercentage) {
    
    let bonus = (basicSalary * bonusPercentage) / 100;
    let grossSalary = basicSalary + bonus;
    let tax = grossSalary * 0.05;
    let finalSalary = grossSalary - tax;

    console.log(" Salary Breakdown ");
    console.log("Basic Salary      :", basicSalary);
    console.log("Bonus Percentage  :", bonusPercentage + "%");
    console.log("Bonus Amount      :", bonus);
    console.log("Gross Salary      :", grossSalary);
    console.log("Tax Deduction (5%):", tax);
    console.log("Final Salary      :", finalSalary);

    return finalSalary;
}

calculateSalary(30000, 10);

</script>


<!-- 2. Student Result System:
Create generateResult(name, marksArray)
- Calculate total
- Calculate average
- Decide Grade (A/B/C/Fail)
- Return result object -->

<!-- Answer: -->

<script>
    function generateResult(name, marksArray) {
    let total = 0;
    for (let mark of marksArray) {
        total += mark;
    }

    let average = total / marksArray.length;
    
    let grade;
    if (average >= 80) {
        grade = "A";
    } else if (average >= 60) {
        grade = "B";
    } else if (average >= 40) {
        grade = "C";
    } else {
        grade = "Fail";
    }

    return {
        name: name,
        totalMarks: total,
        averageMarks: average,
        grade: grade
    };
}

let result = generateResult("Gokul", [78, 85, 72, 80, 90]);
console.log(result);

</script>


3. Debug This Code:
<!-- <script>
function demo(){
if(true){
var a = 10;
let b = 20;
}
console.log(a);
console.log(b);
}
demo()
</script> -->

<!-- Questions:
- What will happen?
1.the output remains blank.

- Why?
1.because the function demo is not called.
2.even if the function is called console.log(a) will be printed as 10 
3.console.log(b) will show reference error cause b is initialized by let variable its a block scoped.

- Fix it properly. -->

<script>
function demo(){
    let b;
    if(true){
        var a = 10;
        b = 20;
    }
    console.log(a);
    console.log(b);
}
demo()

</script>

<!-- 4. Hoisting Analysis:
console.log(x);
var x = 100;
console.log(y);
let y = 200;
Predict output and explain. -->

<!-- answer:
1.undefined and reference error will be displayed.
2.cause var x is initialized after the execution so default value of x will be undefined.
3.same comes for let y it cannot be accessed cause its comes in temporal red zone. -->


<!-- SECTION 3 – Callback & Higher Order (Industry Simulation)
5. Order Processing System:
Create processOrder(orderId, callback)
- Print "Order Processed"
- Call generateInvoice(orderId) -->

Answer:
<script>
function generateInvoice(orderId) {
    console.log("Invoice generated for Order ID:", orderId);
}

function processOrder(orderId, callback) {
    console.log("Order Processed");
    callback(orderId); 
}

processOrder(101, generateInvoice);

</script>

<!-- 6. Bank Transaction System:
Create transaction(amount, type, callback)
- If deposit → add
- If withdraw → subtract
- Call sendSMS() -->
<script>
    let balance = 10000; 

function sendSMS(amount, type, updatedBalance) {
    console.log("SMS Alert:");
    console.log("Transaction Type :", type);
    console.log("Amount:", amount);
    console.log("Available Balance:", updatedBalance);
}

function transaction(amount, type, callback) {
    if (type === "deposit") {
        balance += amount;
        console.log("Deposit Successful");
        console.log("Deposited Amount :", amount);
    } 
    else if (type === "withdraw") {
        if (amount <= balance) {
            balance -= amount;
            console.log("Withdrawal Successful");
        } else {
            console.log("Insufficient Balance");
            return;
        }
    } 
    else {
        console.log("Invalid Transaction Type");
        return;
    }

    callback(amount, type, balance);
}

transaction(5000, "deposit", sendSMS);
// transaction(6000, "withdraw", sendSMS);

</script>

<!-- 
SECTION 4 – Currying (E-Commerce)
7. Dynamic Price Builder:
Create priceBuilder(basePrice)(discount)(tax)
Return final price
Example: priceBuilder(2000)(15)(18) -->

<script>
    function priceBuilder(basePrice) {
    return function(discount) {
         return function(tax) {
            let discountAmount = (basePrice * discount) / 100;
            let priceAfterDiscount = basePrice - discountAmount;

            let taxAmount = (priceAfterDiscount * tax) / 100;

            let finalPrice = priceAfterDiscount + taxAmount;

            return finalPrice;
         };
     };
}
let finalAmount = priceBuilder(2000)(15)(18);
console.log("Final Price:", finalAmount);

</script> 

<!-- 8. Secure Company Module:
- Store private variable companyCode
- Expose getCompanyStatus()
- companyCode should not be directly accessible -->
<script>
const CompanyModule = (function () {
    let companyCode = "STACKLY-FEB-2026";

    return {
        getCompanyStatus() {
            return "Company Active | Code: " + companyCode;
        }
    };
})();


console.log(CompanyModule.getCompanyStatus());
console.log(CompanyModule.companyCode);

</script>


<!-- 9. Unique Order ID Generator:
Generate ORD1001, ORD1002, ORD1003, etc. -->

<SCRIPT>
    function* orderIdGenerator() {
    let counter = 1000;
    while (true) {
        counter++;
        yield "ORD" + counter;
    }
}

const gen = orderIdGenerator();

console.log(gen.next().value); 
console.log(gen.next().value); 
console.log(gen.next().value); 
console.log(gen.next().value);
console.log(gen.next().value);
console.log(gen.next().value);
</SCRIPT>

<!-- 
10. Coupon Spin System:
Yield:
- 10% OFF
- 20% OFF
- 50% OFF
- No Luck
- Jackpot
Simulate multiple spins. -->

<script>
    function* couponSpinGenerator() {
    const coupons = [
        "10% OFF",
        "20% OFF",
        "50% OFF",
        "No Luck",
        "Jackpot"
    ];

    let index = 0;

    while (true) {
        yield coupons[index];
        index = (index + 1) % coupons.length; 
    }
}

const spin = couponSpinGenerator();

console.log("Spin 1:", spin.next().value);
console.log("Spin 2:", spin.next().value);
console.log("Spin 3:", spin.next().value);
console.log("Spin 4:", spin.next().value);
console.log("Spin 5:", spin.next().value);
console.log("Spin 6:", spin.next().value);

</script>

<!-- SECTION 7 – Mini Project (Integrated)
Mini E-Commerce Flow:
- addToCart(product, price)
- calculateTotal()
- applyDiscount() using currying
- generateCoupon() using generator
- processPayment() using callback
- Hide config using IIFE -->

<script>

const AppConfig = (function () {
    const taxRate = 18;     // private
    const currency = "₹";  // private

    return {
        getTaxRate() {
            return taxRate;
        },
        getCurrency() {
            return currency;
        }
    };
})();

const Cart = (function () {
    let cart = [];

    function addToCart(product, price) {
        cart.push({ product, price });
        console.log(`${product} added to cart - ${price}`);
    }

    function calculateTotal() {
        
        let total = cart.reduce((sum, item) => sum + item.price, 0);
        console.log("Cart Total:", total);
        return total;
    }

    return {
        addToCart,
        calculateTotal
    };
})();


const applyDiscount = total => discount => {
    let discountAmount = (total * discount) / 100;
    return total - discountAmount;
};


function* couponGenerator() {
    const coupons = ["10% OFF", "20% OFF", "50% OFF", "No Luck", "Jackpot"];
    let index = 0;

    while (true) {
        yield coupons[index];
        index = (index + 1) % coupons.length;
    }
}

const couponSpin = couponGenerator();

function processPayment(amount, callback) {
    console.log("Processing Payment...");
    setTimeout(() => {
        console.log("Payment Successful");
        callback(amount);
    }, 1000);
}

function paymentReceipt(amount) {
    console.log("Receipt Generated");
    console.log("Paid Amount:", AppConfig.getCurrency() + amount);
}


Cart.addToCart("PS-5", 55000);
Cart.addToCart("Books", 1000);

let total = Cart.calculateTotal();

let discountedAmount = applyDiscount(total)(10);
console.log("After Discount:", discountedAmount);

let tax = (discountedAmount * AppConfig.getTaxRate()) / 100;
let finalAmount1 = discountedAmount + tax;
console.log("Final Amount with Tax:", finalAmount1);

console.log("Coupon Spin Result:", couponSpin.next().value);


processPayment(finalAmount1, paymentReceipt);


</script>

<!-- Concept Questions:
1. Difference between function declaration & expression?
answer:
Function declaration:
* They are fully hoisted,can be called before definition.Used in normal functions
Function expression:
* Only the variable is hoisted,Function cannot be accessed before assignment.
* Must be defined before calling
* used in Callbacks & Closures.
* Function cannot be accessed before assignment   -->

<!-- 2. What is higher order function?

Answer:
A function that takes another function as argument or returns a function -->

<!-- 3. Real-time example of generator?

Answer:
1.OTP generation
2.coupon Spins
3.Employee ID generation
4.Ticket numbers -->

<!-- 4. Why do we use IIFE?

Answer:
1.Avoid global variables
2.Create private data
3.Encapsulation
4.Module pattern -->

<!-- 5. Difference between var, let, const?

var
1.It is a function scoped and they ignores block scope
2.Hoisted and initialized as undefined
3.Redeclaration allowed
4.Can be declared without initialization

Let
1.Its a block scoped and they exists only inside the block scope
2.Hoisted but not initialized and stays in Temporal Dead Zone(TDZ)
3.Redeclaration not allowed
4.Can be declared without initialization

const
1.Its a block scoped and they exists only inside the block scope
2.Hoisted but not initialized and stays in Temporal Dead Zone(TDZ)
3.Redeclaration not allowed
4.Must be intialized at declaration -->